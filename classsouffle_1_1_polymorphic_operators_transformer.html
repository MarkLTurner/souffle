<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>souffle: souffle::PolymorphicOperatorsTransformer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">souffle
   &#160;<span id="projectnumber">1.7.1-400-gbc9d89e</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesouffle.html">souffle</a></li><li class="navelem"><a class="el" href="classsouffle_1_1_polymorphic_operators_transformer.html">PolymorphicOperatorsTransformer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">souffle::PolymorphicOperatorsTransformer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Transformation pass to determine operator types for polymorphic operators.  
 <a href="classsouffle_1_1_polymorphic_operators_transformer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_ast_transforms_8h_source.html">AstTransforms.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for souffle::PolymorphicOperatorsTransformer:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_polymorphic_operators_transformer__inherit__graph.png" border="0" usemap="#souffle_1_1_polymorphic_operators_transformer_inherit__map" alt="Inheritance graph"/></div>
<map name="souffle_1_1_polymorphic_operators_transformer_inherit__map" id="souffle_1_1_polymorphic_operators_transformer_inherit__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_transformer.html" title="{souffle::AstTransformer\n||+ apply()\l+ getName()\l+ ~AstTransformer()\l&#45; transform()\l}" alt="" coords="28,5,201,127"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for souffle::PolymorphicOperatorsTransformer:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_polymorphic_operators_transformer__coll__graph.png" border="0" usemap="#souffle_1_1_polymorphic_operators_transformer_coll__map" alt="Collaboration graph"/></div>
<map name="souffle_1_1_polymorphic_operators_transformer_coll__map" id="souffle_1_1_polymorphic_operators_transformer_coll__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_transformer.html" title="{souffle::AstTransformer\n||+ apply()\l+ getName()\l+ ~AstTransformer()\l&#45; transform()\l}" alt="" coords="28,5,201,127"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aaaeb73d4a536b55075c4af9138918cee"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_polymorphic_operators_transformer.html#aaaeb73d4a536b55075c4af9138918cee">getName</a> () const override</td></tr>
<tr class="separator:aaaeb73d4a536b55075c4af9138918cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsouffle_1_1_ast_transformer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsouffle_1_1_ast_transformer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsouffle_1_1_ast_transformer.html">souffle::AstTransformer</a></td></tr>
<tr class="memitem:a32236031d6b2f0f8dc4bbe0a7aa90b43 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_ast_transformer.html#a32236031d6b2f0f8dc4bbe0a7aa90b43">apply</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit)</td></tr>
<tr class="separator:a32236031d6b2f0f8dc4bbe0a7aa90b43 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3e84a3e9a223b7be8123c7af8f94f39 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_ast_transformer.html#af3e84a3e9a223b7be8123c7af8f94f39">~AstTransformer</a> ()=default</td></tr>
<tr class="separator:af3e84a3e9a223b7be8123c7af8f94f39 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9697c23f62ea845b4572879aa91ee498"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_polymorphic_operators_transformer.html#a9697c23f62ea845b4572879aa91ee498">transform</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit) override</td></tr>
<tr class="separator:a9697c23f62ea845b4572879aa91ee498"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transformation pass to determine operator types for polymorphic operators. </p>
<p>Operators = Functors (plus, minus...) ∪ binary constraints (&gt;, ≥ ...) </p>

<p class="definition">Definition at line <a class="el" href="_ast_transforms_8h_source.html#l00564">564</a> of file <a class="el" href="_ast_transforms_8h_source.html">AstTransforms.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aaaeb73d4a536b55075c4af9138918cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaeb73d4a536b55075c4af9138918cee">&#9670;&nbsp;</a></span>getName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string souffle::PolymorphicOperatorsTransformer::getName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classsouffle_1_1_ast_transformer.html#a5f0905c069a0a2cf54e46e92499ba95c">souffle::AstTransformer</a>.</p>

<p class="definition">Definition at line <a class="el" href="_ast_transforms_8h_source.html#l00566">566</a> of file <a class="el" href="_ast_transforms_8h_source.html">AstTransforms.h</a>.</p>

<p class="reference">References <a class="el" href="_resolve_aliases_transformer_8cpp_source.html#l00434">souffle::ResolveAliasesTransformer::transform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                       {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;PolymorphicOperatorsTransformer&quot;</span>;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_polymorphic_operators_transformer_aaaeb73d4a536b55075c4af9138918cee_cgraph.png" border="0" usemap="#classsouffle_1_1_polymorphic_operators_transformer_aaaeb73d4a536b55075c4af9138918cee_cgraph" alt=""/></div>
<map name="classsouffle_1_1_polymorphic_operators_transformer_aaaeb73d4a536b55075c4af9138918cee_cgraph" id="classsouffle_1_1_polymorphic_operators_transformer_aaaeb73d4a536b55075c4af9138918cee_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_resolve_aliases_transformer.html#abbd9ee9a4d600bc9e61746b43de54f30" title="souffle::ResolveAliasesTransformer\l::transform" alt="" coords="272,123,523,164"/>
<area shape="rect" id="node3" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="571,5,764,47"/>
<area shape="rect" id="node4" href="namespacesouffle.html#a307bae61c898715dccb57c9732335000" title="A utility function visiting all nodes within the ast rooted by the given node recursively in a depth&#45;..." alt="" coords="583,71,751,98"/>
<area shape="rect" id="node8" href="classsouffle_1_1_ast_relation.html#ac5a2e5bef917c0dc9541d65de7eced6e" title="Obtains a list of the associated clauses. " alt="" coords="593,123,741,164"/>
<area shape="rect" id="node10" href="classsouffle_1_1_ast_program.html#ac0733345760aab5b6939cd20b228c223" title="Removes a clause from this program. " alt="" coords="592,188,743,229"/>
<area shape="rect" id="node13" href="classsouffle_1_1_ast_program.html#a29a37490ca76595a9a8403d3acac8db8" title="append a new clause to this program – after parsing " alt="" coords="592,253,743,295"/>
<area shape="rect" id="node5" href="namespacesouffle.html#a030c754119d60ea72cff8af5b62710e6" title="A utility function visiting all nodes within the ast rooted by the given node recursively in a depth&#45;..." alt="" coords="827,64,995,105"/>
<area shape="rect" id="node6" href="classsouffle_1_1_ast_node.html#a07dd728cde93a2b1d72d987cf54cbd8e" title="Obtain a list of all embedded AST child nodes. " alt="" coords="1059,64,1249,105"/>
<area shape="rect" id="node7" href="classsouffle_1_1_ast_node.html#a118aba48ddc9006152aac63f08e0ff01" title="Output to a given output stream. " alt="" coords="1297,71,1464,98"/>
<area shape="rect" id="node9" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="838,130,985,157"/>
<area shape="rect" id="node11" href="classsouffle_1_1_ast_clause.html#a5a29a4f9ba5d0e4aea869cf71a6efbbf" title="Return the atom that represents the head of the clause. " alt="" coords="842,185,981,227"/>
<area shape="rect" id="node12" href="classsouffle_1_1_ast_atom.html#a83a8f4fdc486c20a330570571ec34fb5" title="Return the name of this atom. " alt="" coords="812,251,1011,278"/>
</map>
</div>

</div>
</div>
<a id="a9697c23f62ea845b4572879aa91ee498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9697c23f62ea845b4572879aa91ee498">&#9670;&nbsp;</a></span>transform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::PolymorphicOperatorsTransformer::transform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classsouffle_1_1_ast_transformer.html#a6f2bde49dc0c328e8ef86918322282dc">souffle::AstTransformer</a>.</p>

<p class="definition">Definition at line <a class="el" href="_ast_transforms_8cpp_source.html#l01223">1223</a> of file <a class="el" href="_ast_transforms_8cpp_source.html">AstTransforms.cpp</a>.</p>

<p class="reference">References <a class="el" href="_util_8h_source.html#l01004">souffle::all_of()</a>, <a class="el" href="_ast_program_8cpp_source.html#l00293">souffle::AstProgram::apply()</a>, <a class="el" href="_binary_constraint_ops_8h_source.html#l00076">souffle::convertOverloadedConstraint()</a>, <a class="el" href="_functor_ops_8h_source.html#l00462">souffle::convertOverloadedFunctor()</a>, <a class="el" href="namespacesouffle.html#a17338b66c7b2ef5832634709eb32f0d7a22ae0e2b89e5e3d477f988cc36d3272b">souffle::Float</a>, <a class="el" href="_ast_translation_unit_8h_source.html#l00046">souffle::AstTranslationUnit::getAnalysis()</a>, <a class="el" href="_ast_translation_unit_8h_source.html#l00078">souffle::AstTranslationUnit::getErrorReport()</a>, <a class="el" href="_ast_translation_unit_8h_source.html#l00058">souffle::AstTranslationUnit::getProgram()</a>, <a class="el" href="_ast_type_analysis_8h_source.html#l00046">souffle::TypeAnalysis::getTypes()</a>, <a class="el" href="_type_system_8cpp_source.html#l00324">souffle::isFloatType()</a>, <a class="el" href="_binary_constraint_ops_8h_source.html#l00059">souffle::isOverloaded()</a>, <a class="el" href="_functor_ops_8h_source.html#l00429">souffle::isOverloadedFunctor()</a>, <a class="el" href="_type_system_8cpp_source.html#l00340">souffle::isUnsignedType()</a>, and <a class="el" href="namespacesouffle.html#a17338b66c7b2ef5832634709eb32f0d7aa1a914735b205424ba6c40b85528d78a">souffle::Unsigned</a>.</p>
<div class="fragment"><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                                                                                   {</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keyword">struct </span>TypeRewriter : <span class="keyword">public</span> AstNodeMapper {</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keyword">mutable</span> <span class="keywordtype">bool</span> changed{<span class="keyword">false</span>};</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="keyword">const</span> TypeAnalysis&amp; typeAnalysis;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        ErrorReport&amp; report;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        TypeRewriter(<span class="keyword">const</span> TypeAnalysis&amp; typeAnalysis, ErrorReport&amp; report)</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                : typeAnalysis(typeAnalysis), report(report) {}</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        std::unique_ptr&lt;AstNode&gt; operator()(std::unique_ptr&lt;AstNode&gt; node)<span class="keyword"> const override </span>{</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <span class="comment">// Utility lambdas to determine if all args are of the same type.</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <span class="keyword">auto</span> isFloat = [&amp;](<span class="keyword">const</span> AstArgument* argument) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespacesouffle.html#a1a7d8cb2f6a29f825e650a7c98487718">isFloatType</a>(typeAnalysis.getTypes(argument));</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            };</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            <span class="keyword">auto</span> isUnsigned = [&amp;](<span class="keyword">const</span> AstArgument* argument) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespacesouffle.html#a5c4839a38da22a968ab01e81a67d793c">isUnsignedType</a>(typeAnalysis.getTypes(argument));</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            };</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            <span class="comment">// rewrite sub-expressions first</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            node-&gt;apply(*<span class="keyword">this</span>);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            <span class="comment">// Handle functor</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span>* functor = dynamic_cast&lt;AstIntrinsicFunctor*&gt;(node.get())) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespacesouffle.html#a1194839f74c824923896977b98541e2e">isOverloadedFunctor</a>(functor-&gt;getFunction())) {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                    <span class="comment">// All args must be of the same type.</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="namespacesouffle.html#a14b5f9eb9ec09c40e558b242e75de872">all_of</a>(functor-&gt;getArguments(), isFloat)) {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                        <a class="code" href="namespacesouffle.html#a28ddd8269d2a01a6041800d3b2e3fad9">FunctorOp</a> convertedFunctor =</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                                <a class="code" href="namespacesouffle.html#aea6ff9547a7a99905d5567c1e0906d41">convertOverloadedFunctor</a>(functor-&gt;getFunction(), <a class="code" href="namespacesouffle.html#a17338b66c7b2ef5832634709eb32f0d7a22ae0e2b89e5e3d477f988cc36d3272b">RamTypeAttribute::Float</a>);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                        functor-&gt;setFunction(convertedFunctor);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                        changed = <span class="keyword">true</span>;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacesouffle.html#a14b5f9eb9ec09c40e558b242e75de872">all_of</a>(functor-&gt;getArguments(), isUnsigned)) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                        <a class="code" href="namespacesouffle.html#a28ddd8269d2a01a6041800d3b2e3fad9">FunctorOp</a> convertedFunctor =</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                                <a class="code" href="namespacesouffle.html#aea6ff9547a7a99905d5567c1e0906d41">convertOverloadedFunctor</a>(functor-&gt;getFunction(), <a class="code" href="namespacesouffle.html#a17338b66c7b2ef5832634709eb32f0d7aa1a914735b205424ba6c40b85528d78a">RamTypeAttribute::Unsigned</a>);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                        functor-&gt;setFunction(convertedFunctor);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                        changed = <span class="keyword">true</span>;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                    }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            }</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <span class="comment">// Handle binary constraint</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span>* binaryConstraint = dynamic_cast&lt;AstBinaryConstraint*&gt;(node.get())) {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespacesouffle.html#acf7ac56e1539b5fc646d3822edf00bc2">isOverloaded</a>(binaryConstraint-&gt;getOperator())) {</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                    <span class="comment">// Get arguments</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                    <span class="keyword">auto</span>* leftArg = binaryConstraint-&gt;getLHS();</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                    <span class="keyword">auto</span>* rightArg = binaryConstraint-&gt;getRHS();</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                    <span class="comment">// Both args must be of the same type</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                    <span class="keywordflow">if</span> (isFloat(leftArg) &amp;&amp; isFloat(rightArg)) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                        <a class="code" href="namespacesouffle.html#ac460f7c8b5ab0da53316d6bb32a19f49">BinaryConstraintOp</a> convertedConstraint = <a class="code" href="namespacesouffle.html#a5dc5193443775385cb57fd4ddb45e55b">convertOverloadedConstraint</a>(</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                                binaryConstraint-&gt;getOperator(), <a class="code" href="namespacesouffle.html#a17338b66c7b2ef5832634709eb32f0d7a22ae0e2b89e5e3d477f988cc36d3272b">RamTypeAttribute::Float</a>);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                        binaryConstraint-&gt;setOperator(convertedConstraint);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                        changed = <span class="keyword">true</span>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isUnsigned(leftArg) &amp;&amp; isUnsigned(rightArg)) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                        <a class="code" href="namespacesouffle.html#ac460f7c8b5ab0da53316d6bb32a19f49">BinaryConstraintOp</a> convertedConstraint = <a class="code" href="namespacesouffle.html#a5dc5193443775385cb57fd4ddb45e55b">convertOverloadedConstraint</a>(</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                                binaryConstraint-&gt;getOperator(), <a class="code" href="namespacesouffle.html#a17338b66c7b2ef5832634709eb32f0d7aa1a914735b205424ba6c40b85528d78a">RamTypeAttribute::Unsigned</a>);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                        binaryConstraint-&gt;setOperator(convertedConstraint);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                        changed = <span class="keyword">true</span>;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                    }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            }</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            <span class="comment">// otherwise, return the original node</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="keywordflow">return</span> node;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    };</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keyword">const</span> TypeAnalysis&amp; typeAnalysis = *translationUnit.getAnalysis&lt;TypeAnalysis&gt;();</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    TypeRewriter update(typeAnalysis, translationUnit.getErrorReport());</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    translationUnit.getProgram()-&gt;apply(update);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">return</span> update.changed;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;}</div><div class="ttc" id="namespacesouffle_html_a5c4839a38da22a968ab01e81a67d793c"><div class="ttname"><a href="namespacesouffle.html#a5c4839a38da22a968ab01e81a67d793c">souffle::isUnsignedType</a></div><div class="ttdeci">bool isUnsignedType(const Type &amp;type)</div><div class="ttdoc">Determines whether the given type is a number type. </div><div class="ttdef"><b>Definition:</b> <a href="_type_system_8cpp_source.html#l00340">TypeSystem.cpp:340</a></div></div>
<div class="ttc" id="namespacesouffle_html_a17338b66c7b2ef5832634709eb32f0d7aa1a914735b205424ba6c40b85528d78a"><div class="ttname"><a href="namespacesouffle.html#a17338b66c7b2ef5832634709eb32f0d7aa1a914735b205424ba6c40b85528d78a">souffle::RamTypeAttribute::Unsigned</a></div></div>
<div class="ttc" id="namespacesouffle_html_a5dc5193443775385cb57fd4ddb45e55b"><div class="ttname"><a href="namespacesouffle.html#a5dc5193443775385cb57fd4ddb45e55b">souffle::convertOverloadedConstraint</a></div><div class="ttdeci">BinaryConstraintOp convertOverloadedConstraint(const BinaryConstraintOp constraintOp, const RamTypeAttribute toType)</div><div class="ttdoc">Convert Constraint to work with requested type. </div><div class="ttdef"><b>Definition:</b> <a href="_binary_constraint_ops_8h_source.html#l00076">BinaryConstraintOps.h:76</a></div></div>
<div class="ttc" id="namespacesouffle_html_acf7ac56e1539b5fc646d3822edf00bc2"><div class="ttname"><a href="namespacesouffle.html#acf7ac56e1539b5fc646d3822edf00bc2">souffle::isOverloaded</a></div><div class="ttdeci">bool isOverloaded(const BinaryConstraintOp constraintOp)</div><div class="ttdoc">Utility function, informing whether constraint is overloaded. </div><div class="ttdef"><b>Definition:</b> <a href="_binary_constraint_ops_8h_source.html#l00059">BinaryConstraintOps.h:59</a></div></div>
<div class="ttc" id="namespacesouffle_html_a1a7d8cb2f6a29f825e650a7c98487718"><div class="ttname"><a href="namespacesouffle.html#a1a7d8cb2f6a29f825e650a7c98487718">souffle::isFloatType</a></div><div class="ttdeci">bool isFloatType(const Type &amp;type)</div><div class="ttdoc">Determines whether the given type is a float type. </div><div class="ttdef"><b>Definition:</b> <a href="_type_system_8cpp_source.html#l00324">TypeSystem.cpp:324</a></div></div>
<div class="ttc" id="namespacesouffle_html_a17338b66c7b2ef5832634709eb32f0d7a22ae0e2b89e5e3d477f988cc36d3272b"><div class="ttname"><a href="namespacesouffle.html#a17338b66c7b2ef5832634709eb32f0d7a22ae0e2b89e5e3d477f988cc36d3272b">souffle::RamTypeAttribute::Float</a></div></div>
<div class="ttc" id="namespacesouffle_html_aea6ff9547a7a99905d5567c1e0906d41"><div class="ttname"><a href="namespacesouffle.html#aea6ff9547a7a99905d5567c1e0906d41">souffle::convertOverloadedFunctor</a></div><div class="ttdeci">FunctorOp convertOverloadedFunctor(const FunctorOp functor, const RamTypeAttribute toType)</div><div class="ttdoc">Convert an overloaded functor, so that it works with the requested type. </div><div class="ttdef"><b>Definition:</b> <a href="_functor_ops_8h_source.html#l00462">FunctorOps.h:462</a></div></div>
<div class="ttc" id="namespacesouffle_html_a28ddd8269d2a01a6041800d3b2e3fad9"><div class="ttname"><a href="namespacesouffle.html#a28ddd8269d2a01a6041800d3b2e3fad9">souffle::FunctorOp</a></div><div class="ttdeci">FunctorOp</div><div class="ttdef"><b>Definition:</b> <a href="_functor_ops_8h_source.html#l00027">FunctorOps.h:27</a></div></div>
<div class="ttc" id="namespacesouffle_html_ac460f7c8b5ab0da53316d6bb32a19f49"><div class="ttname"><a href="namespacesouffle.html#ac460f7c8b5ab0da53316d6bb32a19f49">souffle::BinaryConstraintOp</a></div><div class="ttdeci">BinaryConstraintOp</div><div class="ttdoc">Binary Constraint Operators. </div><div class="ttdef"><b>Definition:</b> <a href="_binary_constraint_ops_8h_source.html#l00033">BinaryConstraintOps.h:33</a></div></div>
<div class="ttc" id="namespacesouffle_html_a14b5f9eb9ec09c40e558b242e75de872"><div class="ttname"><a href="namespacesouffle.html#a14b5f9eb9ec09c40e558b242e75de872">souffle::all_of</a></div><div class="ttdeci">bool all_of(const Container &amp;c, UnaryPredicate p)</div><div class="ttdoc">A generic test checking whether all elements within a container satisfy a certain predicate...</div><div class="ttdef"><b>Definition:</b> <a href="_util_8h_source.html#l01004">Util.h:1004</a></div></div>
<div class="ttc" id="namespacesouffle_html_a1194839f74c824923896977b98541e2e"><div class="ttname"><a href="namespacesouffle.html#a1194839f74c824923896977b98541e2e">souffle::isOverloadedFunctor</a></div><div class="ttdeci">bool isOverloadedFunctor(const FunctorOp functor)</div><div class="ttdoc">Indicate whether a functor is overloaded. </div><div class="ttdef"><b>Definition:</b> <a href="_functor_ops_8h_source.html#l00429">FunctorOps.h:429</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_polymorphic_operators_transformer_a9697c23f62ea845b4572879aa91ee498_cgraph.png" border="0" usemap="#classsouffle_1_1_polymorphic_operators_transformer_a9697c23f62ea845b4572879aa91ee498_cgraph" alt=""/></div>
<map name="classsouffle_1_1_polymorphic_operators_transformer_a9697c23f62ea845b4572879aa91ee498_cgraph" id="classsouffle_1_1_polymorphic_operators_transformer_a9697c23f62ea845b4572879aa91ee498_cgraph">
<area shape="rect" id="node2" href="namespacesouffle.html#a14b5f9eb9ec09c40e558b242e75de872" title="A generic test checking whether all elements within a container satisfy a certain predicate..." alt="" coords="316,271,427,297"/>
<area shape="rect" id="node3" href="classsouffle_1_1_ast_program.html#a0a658e411394dfc93da0ab36e06d0101" title="Mutates this node. " alt="" coords="296,322,447,363"/>
<area shape="rect" id="node4" href="namespacesouffle.html#a5dc5193443775385cb57fd4ddb45e55b" title="Convert Constraint to work with requested type. " alt="" coords="272,387,471,429"/>
<area shape="rect" id="node5" href="namespacesouffle.html#aea6ff9547a7a99905d5567c1e0906d41" title="Convert an overloaded functor, so that it works with the requested type. " alt="" coords="272,453,471,494"/>
<area shape="rect" id="node6" href="classsouffle_1_1_ast_translation_unit.html#af396e44c83e5ad410c9ec3e2f6b91758" title="get analysis: analysis is generated on the fly if not present " alt="" coords="275,518,468,559"/>
<area shape="rect" id="node7" href="classsouffle_1_1_ast_translation_unit.html#aec4a1cc2e03286db878a5d2f0377f894" title="get error report " alt="" coords="275,583,468,625"/>
<area shape="rect" id="node8" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="275,649,468,690"/>
<area shape="rect" id="node9" href="classsouffle_1_1_type_analysis.html#a718c9369175312a51ed803c99ce43efb" title="Get the computed types for the given argument. " alt="" coords="292,817,451,858"/>
<area shape="rect" id="node30" href="namespacesouffle.html#a1194839f74c824923896977b98541e2e" title="Indicate whether a functor is overloaded. " alt="" coords="755,1597,961,1624"/>
<area shape="rect" id="node47" href="namespacesouffle.html#a1a7d8cb2f6a29f825e650a7c98487718" title="Determines whether the given type is a float type. " alt="" coords="533,45,680,72"/>
<area shape="rect" id="node48" href="namespacesouffle.html#acf7ac56e1539b5fc646d3822edf00bc2" title="Utility function, informing whether constraint is overloaded. " alt="" coords="291,933,451,960"/>
<area shape="rect" id="node49" href="namespacesouffle.html#a5c4839a38da22a968ab01e81a67d793c" title="Determines whether the given type is a number type. " alt="" coords="519,163,695,189"/>
<area shape="rect" id="node10" href="classsouffle_1_1_type_analysis.html#ad03f4742d97ca60ab48f0f76ba0a1b0e" title="Analyse the given clause and computes for each contained argument a set of potential types..." alt="" coords="527,817,686,858"/>
<area shape="rect" id="node11" href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0" title="Returns the relation referenced by the given atom. " alt="" coords="767,613,949,640"/>
<area shape="rect" id="node14" href="classsouffle_1_1_ast_atom.html#a9c726c597d7921245dd97dcc72b8aeed" title="Provides access to the list of arguments of this atom. " alt="" coords="743,765,973,792"/>
<area shape="rect" id="node16" href="classsouffle_1_1_type_environment.html#ad76ba516b5c5acab7f895243a2cf6c00" title="souffle::TypeEnvironment\l::isType" alt="" coords="1037,878,1223,919"/>
<area shape="rect" id="node17" href="namespacesouffle.html#a8cc19c66d9d13ce64e65f14dcabb43b3" title="Determines whether type a is a subtype of type b. " alt="" coords="781,1116,935,1143"/>
<area shape="rect" id="node18" href="classsouffle_1_1_type_environment.html#a5586a154835d2bfc076b9d5fcc11a50f" title="souffle::TypeEnvironment\l::getNumberType" alt="" coords="1317,1082,1503,1123"/>
<area shape="rect" id="node19" href="classsouffle_1_1_type_environment.html#a72fa419d33bf813f22efabec629a4627" title="souffle::TypeEnvironment\l::getSymbolType" alt="" coords="1317,1147,1503,1189"/>
<area shape="rect" id="node24" href="classsouffle_1_1_type_environment.html#a2955ff39b330ae15de7c0b694b06ebd0" title="souffle::TypeEnvironment\l::getType" alt="" coords="765,1531,951,1573"/>
<area shape="rect" id="node25" href="classsouffle_1_1_ast_negation.html#a0737c379dac1c350accecb1e2301698c" title="Returns the nested atom as the referenced atom. " alt="" coords="781,286,935,327"/>
<area shape="rect" id="node26" href="classsouffle_1_1_type_environment.html#a5569e54d58b6ca69f1fffbdd77143545" title="souffle::TypeEnvironment\l::getFloatType" alt="" coords="765,38,951,79"/>
<area shape="rect" id="node27" href="classsouffle_1_1_type_environment.html#a0b191b7782e170a23b54f7ec347a32ab" title="souffle::TypeEnvironment\l::getUnsignedType" alt="" coords="765,155,951,197"/>
<area shape="rect" id="node28" href="classsouffle_1_1_ast_binary_constraint.html#a72b9e10473e1748d720bbf68a3e7f471" title="Return LHS argument. " alt="" coords="756,351,960,393"/>
<area shape="rect" id="node29" href="classsouffle_1_1_ast_binary_constraint.html#a61055c91c04bcbe4d03873044c6bf4b8" title="Return RHS argument. " alt="" coords="756,417,960,458"/>
<area shape="rect" id="node31" href="classsouffle_1_1_ast_intrinsic_functor.html#abd8fa8ebe58c5ace29ea283f8ef6b483" title="get function " alt="" coords="761,482,955,523"/>
<area shape="rect" id="node32" href="classsouffle_1_1_ast_term.html#a5bf9145afa6b327c21e3393123c292c3" title="get arguments " alt="" coords="745,948,971,975"/>
<area shape="rect" id="node33" href="classsouffle_1_1_ast_intrinsic_functor.html#a92144d9bb27f21d63e0db42bd21f951d" title="get the return type of the functor. " alt="" coords="761,221,955,262"/>
<area shape="rect" id="node35" href="classsouffle_1_1_ast_term.html#acb9d1a38d12c0431439f9bca1ed99fbe" title="get number of arguments " alt="" coords="765,664,951,691"/>
<area shape="rect" id="node36" href="classsouffle_1_1_ast_term.html#a1fda9afed8208435006d0c7fdc6b2ae2" title="get argument at idx " alt="" coords="769,715,947,741"/>
<area shape="rect" id="node37" href="classsouffle_1_1_ast_intrinsic_functor.html#a134528072b67bac2c4ad58e27acb61ba" title="get type of the functor argument " alt="" coords="761,547,955,589"/>
<area shape="rect" id="node39" href="classsouffle_1_1_ast_program.html#ae88b4bf75d9cc91350e459023cbd905b" title="Get functor declaration. " alt="" coords="771,817,945,858"/>
<area shape="rect" id="node40" href="classsouffle_1_1_ast_user_defined_functor.html#a585afa889111f211a7734f608a5d3098" title="get name " alt="" coords="747,882,969,923"/>
<area shape="rect" id="node41" href="classsouffle_1_1_ast_functor_declaration.html#a7dce79585917858330af83f57f775c79" title="is return type a number value " alt="" coords="749,999,967,1041"/>
<area shape="rect" id="node42" href="classsouffle_1_1_ast_functor_declaration.html#af0d11c1975bf19973b3929943f0d2b4c" title="is return type a symbolic value " alt="" coords="749,1218,967,1259"/>
<area shape="rect" id="node43" href="classsouffle_1_1_ast_functor_declaration.html#a041cc43efd803a8b5d0d28dc3a2cad64" title="accepts the i&#45;th argument as a number value " alt="" coords="749,1466,967,1507"/>
<area shape="rect" id="node45" href="classsouffle_1_1_ast_functor_declaration.html#ab0cb6d725ad567bf250e0d025b6fc089" title="accepts the i&#45;th argument as a symbolic value " alt="" coords="749,1335,967,1377"/>
<area shape="rect" id="node46" href="classsouffle_1_1_ast_aggregator.html#ab7e1ea1e90047289a281ebe75a19365e" title="Get target expression. " alt="" coords="775,1401,941,1442"/>
<area shape="rect" id="node12" href="classsouffle_1_1_ast_atom.html#a83a8f4fdc486c20a330570571ec34fb5" title="Return the name of this atom. " alt="" coords="1031,609,1229,636"/>
<area shape="rect" id="node13" href="classsouffle_1_1_ast_program.html#a6a4814327ce4603e7e332b21188495e1" title="Find and return the relation in the program given its name. " alt="" coords="1055,661,1205,702"/>
<area shape="rect" id="node15" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="1057,805,1203,832"/>
<area shape="rect" id="node21" href="classsouffle_1_1_type.html#a2bc9172d0ce6390a7960b24b16172c79" title="souffle::Type::getTypeEnvironment" alt="" coords="1287,944,1533,971"/>
<area shape="rect" id="node22" href="namespacesouffle.html#a4e502e6abb9a3e9a8e4c1168dbf23743" title="Determines whether the given type is a number type. " alt="" coords="1047,995,1213,1021"/>
<area shape="rect" id="node23" href="namespacesouffle.html#a11f6c352eec6bde7b5a0b143ffe64e3b" title="Determines whether the given type is a symbol type. " alt="" coords="1048,1045,1212,1072"/>
<area shape="rect" id="node20" href="classsouffle_1_1_type.html#a00437c665d598367ff16229c823c728f" title="souffle::Type::print" alt="" coords="1581,1155,1724,1181"/>
<area shape="rect" id="node34" href="namespacesouffle.html#ab9712788bdc0bb2819055287d0da38e6" title="Check a functor&#39;s return type (codomain). " alt="" coords="1034,228,1226,255"/>
<area shape="rect" id="node38" href="namespacesouffle.html#a2b92cb49841ce44d3caee497f0776dd8" title="Check the type of argument indicated by arg (0&#45;indexed) of a functor op. " alt="" coords="1035,555,1225,581"/>
<area shape="rect" id="node44" href="classsouffle_1_1_ast_functor_declaration.html#a32abce5bc11dcccd25d8c405c0ba662a" title="get number of arguments " alt="" coords="1021,1401,1239,1442"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_ast_transforms_8h_source.html">AstTransforms.h</a></li>
<li><a class="el" href="_ast_transforms_8cpp_source.html">AstTransforms.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
